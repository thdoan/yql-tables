"use strict";
/*! Source: https://github.com/css2xpath/css2xpath/blob/master/index.js */
(function(){function g(n,t){return n.replace(st,function(n,i,r){return r.substr(r.length-2)==="::"?n:(r.charAt(0)==="["&&(t+="*"),i+t+r)})}function pt(n,t){for(var i=0,r=0;t--;)switch(n.charAt(t)){case" ":case y:r++;break;case"[":case"(":if(i--,i<0)return++t+r;break;case"]":case")":i++;break;case",":case"|":if(i===0)return++t+r;default:r=0}return 0}function u(n){var t=parseInt(n,10);return!isNaN(t)&&""+t===n}function wt(n,t,i,r){var u=0;return n.replace(new RegExp("[\\"+t+"\\"+i+"]","g"),function(n){return n===t&&u++,n===t?n+a(r,u):a(r,u--)+n})}function a(n,t){t=Number(t);for(var i="";;){if(t&1&&(i+=n),t>>>=1,t<=0)break;n+=n}return i}function n(n,t){var r,i,f;if(t===!0)return n=n.replace(w,b),n.replace(k,d);for(n=wt(n,"(",")",y),r=[],n=n.replace(ut,function(n,t){if(t.charAt(0)==="="){if(t=t.substr(1).trim(),u(t))return n}else t=t.substr(1,t.length-2);return a(rt,r.push(t))}),n=n.replace(lt,at),n=n.replace(vt,yt);;){if(i=n.search(et),i===-1)break;i=n.indexOf(":",i);f=pt(n,i);n=n.substr(0,f)+"("+n.substring(f,i)+")"+n.substr(i)}return n=n.replace(w,b),n=n.replace(k,d),n=n.replace(ft,function(n,t){var i=r[t.length-1];return'"'+i+'"'}),n=n.replace(ot,""),n=n.replace(ht,"$1*["),n=n.replace(ct,"$1/@"),g(n,"//")}var f=function(n){return"translate("+(n||"normalize-space()")+", 'ABCDEFGHJIKLMNOPQRSTUVWXYZ', 'abcdefghjiklmnopqrstuvwxyz')"},o=function(n,t){return"substring("+n+",string-length("+n+")-string-length("+t+")+1)="+t},e=function(n){return"substring-before(concat(substring-after("+(n||i)+',"://"),"?"),"?")'},s=function(n){return"substring-after("+(n||i)+',"/")'},t=function(n){return"substring-before(concat(substring-after("+(n||i)+',"://"),"/"),"/")'},i="@href|@src",h=f(),r="ancestor-or-self::*[last()]/@url",nt=s(e(r)),c="(starts-with("+i+',"http://") or starts-with('+i+',"https://"))',v="starts-with("+e()+","+t(r)+") or "+o(t(),t(r)),bt="("+c+" and starts-with("+e()+","+e(r)+"))",kt="starts-with("+i+',"/")',dt="starts-with("+s()+","+nt+")",l="normalize-space()",tt="[not("+c+") or "+v+"]",it="["+c+" and not("+v+")]",rt=String.fromCharCode(30),y=String.fromCharCode(31),ut=/("[^"\x1E]*"|'[^'\x1E]*'|=\s*[^\s\]\'\"]+)/g,ft=/['"]?(\x1E+)['"]?/g,et=/(\x1F\)|[^\)])\:(first|limit|last|gt|lt|eq|nth)([^\-]|$)/,ot=/[\x1C-\x1F]+/g,st=/^([\s\(\x1F]*)(\.?[^\.\/\(]{1,2}[a-z]*:*)/,ht=/(^|\/|\:)\[/g,ct=/([^\(\[\/\|\s\x1F])\@/g,p=/^([-0-9]*)n.*?([0-9]*)$/,lt=/\s*(!?[+>~,^ ])\s*(\.?\/+|[a-z\-]+::)?([a-z\-]+\()?((and\s*|or\s*|mod\s*)?[^+>~,\s'"\]\|\^\$\!\<\=\x1C-\x1F]+)?/g,at=function(n,t,i,r,f,e,o,s){var c="",h;if(t===" "&&e!==undefined)return n;if(i===undefined){if(r!==undefined&&r!=="node("&&r!=="text("&&r!=="comment(")return;if(f===undefined&&(f=r),u(f))return n;h=s.charAt(o-1);(h.length===0||h==="("||h==="|"||h===":")&&(c=".")}if(f===undefined)if(o+n.length===s.length)f="*";else return n;switch(t){case" ":return"//"+f;case">":return"/"+f;case"+":return c+"/following-sibling::*[1]/self::"+f;case"~":return c+"/following-sibling::"+f;case",":return i===undefined,i=".//","|"+i+f;case"^":return"/child::*[1]/self::"+f;case"!^":return"/child::*[last()]/self::"+f;case"! ":return"/ancestor-or-self::"+f;case"!>":return"/parent::"+f;case"!+":return"/preceding-sibling::*[1]/self::"+f;case"!~":return"/preceding-sibling::"+f}},vt=/\[([^\@\|\*\=\^\~\$\!\(\/\s\x1C-\x1F]+)\s*(([\|\*\~\^\$\!]?)=?\s*(\x1E+))?\]/g,yt=function(n,t,i,r,u,f,e){var o="",s=e.charAt(f-1);switch(r){case"!":return o+"[not(@"+t+") or @"+t+'!="'+u+'"]';case"$":return o+"[substring(@"+t+",string-length(@"+t+')-(string-length("'+u+'")-1))="'+u+'"]';case"^":return o+"[starts-with(@"+t+',"'+u+'")]';case"~":return o+'[contains(concat(" ",normalize-space(@'+t+')," "),concat(" ","'+u+'"," "))]';case"*":return o+"[contains(@"+t+',"'+u+'")]';case"|":return o+"[@"+t+'="'+u+'" or starts-with(@'+t+',concat("'+u+'","-"))]';default:return i===undefined?t.charAt(t.length-1)==="("||t.search(/^[0-9]+$/)!==-1||t.indexOf(":")!==-1?n:o+"[@"+t+"]":o+"[@"+t+'="'+u+'"]'}},w=/:([a-z\-]+)(\((\x1F+)(([^\x1F]+(\3\x1F+)?)*)(\3\)))?/g,b=function(i,e,c,a,v,y,w,b,k,d){var nt,ut,rt;if(d.charAt(k-1)===":"&&d.charAt(k-2)!==":")return i;(e==="odd"||e==="even")&&(v=e,e="nth-of-type");switch(e){case"after":return"[count("+n("preceding::"+v,!0)+") > 0]";case"after-sibling":return"[count("+n("preceding-sibling::"+v,!0)+") > 0]";case"before":return"[count("+n("following::"+v,!0)+") > 0]";case"before-sibling":return"[count("+n("following-sibling::"+v,!0)+") > 0]";case"checked":return"[@selected or @checked]";case"contains":return"[contains("+l+","+v+")]";case"icontains":return"[contains("+h+","+f(v)+")]";case"empty":return"[not(*) and not(normalize-space())]";case"enabled":case"disabled":return"[@"+e+"]";case"first-child":return"[not(preceding-sibling::*)]";case"first":case"limit":case"first-of-type":return v!==undefined?"[position()<="+v+"]":"[1]";case"gt":return"[position()>"+(parseInt(v,10)+1)+"]";case"lt":return"[position()<"+(parseInt(v,10)+1)+"]";case"last-child":return"[not(following-sibling::*)]";case"only-child":return"[not(preceding-sibling::*) and not(following-sibling::*)]";case"only-of-type":return"[not(preceding-sibling::*[name()=name(self::node())]) and not(following-sibling::*[name()=name(self::node())])]";case"nth-child":if(u(v))return"[(count(preceding-sibling::*)+1) = "+v+"]";switch(v){case"even":return"[(count(preceding-sibling::*)+1) mod 2=0]";case"odd":return"[(count(preceding-sibling::*)+1) mod 2=1]";default:return nt=(v||"0").replace(p,"$1+$2").split("+"),nt[0]=nt[0]||"1",nt[1]=nt[1]||"0","[(count(preceding-sibling::*)+1)>="+nt[1]+" and ((count(preceding-sibling::*)+1)-"+nt[1]+") mod "+nt[0]+"=0]"}case"nth-of-type":if(u(v))return"["+v+"]";switch(v){case"odd":return"[position() mod 2=1]";case"even":return"[position() mod 2=0 and position()>=0]";default:return nt=(v||"0").replace(p,"$1+$2").split("+"),nt[0]=nt[0]||"1",nt[1]=nt[1]||"0","[position()>="+nt[1]+" and (position()-"+nt[1]+") mod "+nt[0]+"=0]"}case"eq":case"nth":return u(v)?"["+(parseInt(v,10)+1)+"]":"[1]";case"text":return'[@type="text"]';case"istarts-with":return"[starts-with("+h+","+f(v)+")]";case"starts-with":return"[starts-with("+l+","+v+")]";case"iends-with":return"["+o(h,f(v))+"]";case"ends-with":return"["+o(l,v)+"]";case"has":return rt=g(n(v,!0),".//"),"[count("+rt+") > 0]";case"has-sibling":return rt=n("preceding-sibling::"+v,!0),"[count("+rt+") > 0 or count(following-sibling::"+rt.substr(19)+") > 0]";case"has-parent":return"[count("+n("parent::"+v,!0)+") > 0]";case"has-ancestor":return"[count("+n("ancestor::"+v,!0)+") > 0]";case"last":case"last-of-type":return v!==undefined?"[position()>last()-"+v+"]":"[last()]";case"selected":return'[local-name()="option" and @selected]';case"skip":case"skip-first":return"[position()>"+v+"]";case"skip-last":return v!==undefined?"[last()-position()>="+v+"]":"[position()<last()]";case"root":return"/ancestor::[last()]";case"range":return ut=v.split(","),"["+ut[0]+"<=position() and position()<="+ut[1]+"]";case"input":return'[local-name()="input" or local-name()="button" or local-name()="select" or local-name()="textarea"]';case"internal":return tt;case"external":return it;case"http":case"https":case"mailto":case"javascript":return'[starts-with(@href,concat("'+e+'",":"))]';case"domain":return"[(string-length("+t()+")=0 and contains("+t(r)+","+v+")) or contains("+t()+","+v+")]";case"path":return"[starts-with("+s()+',substring-after("'+v+'","/"))]';case"not":return rt=n(v,!0),rt.charAt(0)==="["&&(rt="self::node()"+rt),"[not("+rt+")]";case"target":return'[starts-with(@href, "#")]';case"root":return"ancestor-or-self::*[last()]";case"lang":return'[@lang="'+v+'"]';case"read-only":case"read-write":return"[@"+e.replace("-","")+"]";case"valid":case"required":case"in-range":case"out-of-range":return"[@"+e+"]";default:return str}},k=/(#|\.)([^\#\@\.\/\(\[\)\]\|\:\s\+\>\<\'\"\x1D-\x1F]+)/g,d=function(n,t,i){var r="";return t==="#"?r+'[@id="'+i+'"]':r+'[contains(concat(" ",normalize-space(@class)," ")," '+i+' ")]'};typeof module!="undefined"&&typeof module.exports!="undefined"?module.exports=n:window.css2xpath=n})();
